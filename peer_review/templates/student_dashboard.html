{% extends 'base_student.html' %}
{% load static %}

{% block header %}
    <link rel="stylesheet" href="{% static 'css/common.css' %}" />
    <link rel="stylesheet" href="{% static 'css/student_dashboard.css' %}" />
{% endblock %}

{% block content %}
    <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell-1-col-phone"></div>
        <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--8-col mdl-cell--6-col-tablet mdl-cell-2-col-phone section-card">
            <div class="mdl-card__title">
                <h1 class="mdl-card__title-text">Reviews To Complete</h1>
            </div>
            <div class="mdl-card__supporting-text">
                {% if finished_prompt %}
                    <div class="mdl-card mdl-shadow--2dp peer-review-card">
                        <div class="mdl-card__supporting-text peer-review-submissions-container">
                            <div class="icon-container">
                                <i class="material-icons icon-24px">done</i>
                                <span class="icon-caption">You have completed all of your peer reviews for {{ finished_prompt.title }}.  Thank you!</span>
                            </div>
                        </div>
                    </div>
                {% endif %}
                {% if reviews_to_complete %}
                    {% for details in reviews_to_complete %}
                        <div class="mdl-card mdl-shadow--2dp peer-review-card">
                            <div class="mdl-card__title">
                                <div class="title-line-container">
                                    <div class="side-by-side-container">
                                        <h2 class="mdl-card__title-text">{{ details.title }}</h2>
                                    </div>
                                    <div class="side-by-side-container right-side-container">
                                        <div class="icon-container">
                                            <i class="material-icons icon-24px">query_builder</i>
                                            <span class="icon-caption">
                                            Due {% if details.due_date %}{{ details.due_date | date:'F j g:i A' }}{% else %}anytime{% endif %}
                                        </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mdl-card__supporting-text peer-review-submissions-container">
                                {% for submission in details.submissions %}
                                    <div class="mdl-card mdl-shadow--2dp peer-review-submission-card">
                                        <div class="mdl-card__title">
                                            <h3 class="mdl-card__title-text">Submission {{ forloop.counter }}</h3>
                                        </div>
                                        <div class="mdl-card__actions mdl-card--border">
                                            {% if submission.peer_review_complete %}
                                                <div class="icon-container">
                                                    <i class="material-icons icon-24px">done</i>
                                                    <span class="icon-caption">Complete</span>
                                                </div>
                                            {% else %}
                                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                                                   href="/course/{{ course_id }}/review/submission/{{ submission.id }}">
                                                    Start Review
                                                </a>
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>You have no reviews to complete at this time.</p>
                {% endif %}
            </div>
        </div>
        <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell-1-col-phone"></div>
    </div>
    <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell-1-col-phone"></div>
        <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--8-col mdl-cell--6-col-tablet mdl-cell-2-col-phone section-card">
            <div class="mdl-card__title">
                <h1 class="mdl-card__title-text">Reviews Of My Work</h1>
            </div>
            <div class="mdl-card__supporting-text">
                {% if reviews_received %}
                    <div class="mdl-list">
                        {% for submission, number_of_reviews in reviews_received %}
                            <div class="mdl-list__item">
                                <span class="mdl-list__item-primary-content">
                                    <span>{{ submission.assignment.title }}</span>
                                </span>
                                <a class="mdl-list__item-secondary-action mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                                   href="/course/{{ course_id }}/review/submission/{{ submission.id }}/completed">
                                    View {{ number_of_reviews }} Review{% if number_of_reviews > 1 %}s{% endif %}
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>Your work has not been reviewed yet.</p>
                {% endif %}
            </div>
        <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell-1-col-phone"></div>
    </div>
{% endblock %}
